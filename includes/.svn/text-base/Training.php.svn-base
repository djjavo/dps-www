<?php
class Training{
	public static function get($username){
                $result = RawDB::query("
SELECT web_training.training_id,web_training.name AS module_name,
(CASE WHEN web_members_training.username IS NULL THEN FALSE ELSE TRUE END) AS status, date_part('epoch',web_members_training.date) AS 
date, web_members_training.trainer AS trainer_username,web_members.name AS trainer_name, web_members_training.rating,web_members_training.comment
FROM web_training LEFT OUTER JOIN web_members_training
ON (web_training.training_id = web_members_training.training_id AND web_members_training.username = '".pg_escape_string($username)."')
LEFT OUTER JOIN web_members ON(web_members_training.trainer = web_members.username)");
                $array = array();
                while($row = pg_fetch_object($result,null,'TrainingObject'))
                        $array[] = $row;
                return $array;

	}
}
?>
