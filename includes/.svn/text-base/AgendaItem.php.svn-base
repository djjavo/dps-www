<?php
class AgendaItem {
	protected $id;
	protected $meeting_id;
	protected $title;
	protected $description;
	protected $username;
	
	function __construct($meeting_id){
		if(!is_numeric($meeting_id)){
			trigger_error("No meeting id supplied");
			return false;
		}
		$this->meeting_id = $meeting_id;
	}
	
	public function getID(){
		return $this->id;
	}
	public function getMeetingID(){
		return $this->meeting_id;
	}
	public function getTitle(){
		return $this->title;
	}
	public function getDescription(){
		return $this->description;
	}
	public function getUsername(){
		return $this->username;
	}
	
	public function setTitle($input){
		$this->title = $input;
	}
	public function setDescription($input){
		$this->description = $input;
	}
	public function setUsername(){
		$this->username = Session::get_username();
	}
	
	public function save(){
		if(is_null($this->id))
			$this->insert();
		else
			$this->update();
	}
	public function insert(){
		return RawDB::query("INSERT INTO web_agenda_items (meeting_id, title, description) VALUES ('".pg_escape_string($this->meeting_id)."', '".pg_escape_string($this->title)."', '".pg_escape_string($this->description)."')");
	}
	public function update(){
		return RawDB::query("UPDATE web_agenda_items SET title='".pg_escape_string($this->title)."', description='".pg_escape_string($this->description)."' WHERE id = ".$this->id);
	}
	
	protected function delete(){
		return RawDB::query("DELETE FROM web_agenda_items WHERE id = '".$this->id."'");
	}
}