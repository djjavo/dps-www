<?php
class Member{
	protected $username;
	protected $id;
	protected $name;
	protected $nick;
	protected $uni_email;
	protected $email;
	protected $telephone;
	public function get_username(){
		return $this->username;
	}
	public function get_id(){
		return $this->id;
	}
	public function get_name(){
		return $this->name;
	}
	public function get_nick(){
		return $this->nick;
	}
	public function get_uni_email(){
		return $this->uni_email;
	}
	public function get_email(){
		return $this->email;
	}
	public function get_telephone(){
		return $this->telephone;
	}
	public function get_training(){
		return Training::get($this->username);
	}
	public function get_owned_shows(){
		return Shows::get_owned_by($this->username);
	}
	public function get_presented_shows(){
		return Shows::get_presented_by($this->username);
	}
	public function get_touched_shows(){
		return Shows::get_touched_by($this->username);
	}
	public function signed_latest_contract(){
		Contracts::signed_latest_contract($this->username);
	}
	public function get_profile(){
		$result = RawDB::query("SELECT * FROM web_members_profiles WHERE username = '".$this->username."'");
		return pg_fetch_object($result, NULL, "Profile");
	}
	public function get_podcasts(){
		return Podcasts::get_owned_by($this->username);
	}
	public function save(){
		$this->update();
	}
	protected function update(){
		RawDB::query("UPDATE web_members SET 'nick'='".pg_escape_string($this->nick)."', 'email'='".pg_escape_string($this->email)."', 'telephone'='".pg_escape_string($this->telephone)."' WHERE id = '".$this->id."'");
	}
}
?>
