<?php
class NewsCategory {
	protected $categoryid;
	protected $link;
	protected $name;
	
	public function get_categoryid(){
		return $this->categoryid;
	}
	public function get_name(){
		return $this->name;
	}
	public function get_link(){
		return $this->link;
	}
	
	public function get_xml($full_story = FALSE) {
		putenv("TZ=GB");
		
		$return = "<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>\n";
		$return .= "<rss version=\"2.0\" xmlns:media=\"http://search.yahoo.com/mrss\">\n";
		$return .= "<channel>\n";
		$return .= "	<title>RaW 1251AM - RaW News - ".$this->name."</title>\n";
		$return .= "	<link>".SITE_LINK_ABS_HTTP ."news/".$this->link."/</link>\n";
		$return .= "	<description>All the latest from RaW News, Your News.</description>\n";
		$return .= "	<language>en-gb</language>\n";
		$return .= "	<lastBuildDate>".date("D, d M Y G:i:s T", time())."</lastBuildDate>\n";
		$return .= "	<copyright>Copyright: (C) RaW 1251AM</copyright>\n";
		$return .= "	<ttl>15</ttl>\n";
		
		$articles = News::fetch_category(self::get_categoryid(), TRUE, 10, NULL);
		foreach ($articles AS $article) {
			$return .= $article->get_xml($full_story);
		}
		
		$return .= "	</channel>\n";
		$return .= "</rss>\n";
		
		return $return;
	}
	
}
